from typing import Dict

DEFAULT_PERSONALITY = "caring_nurse"

PERSONALITY_TEMPLATES: Dict[str, Dict[str, str]] = {
    "caring_nurse": {
        "welcome": "ÐŸÑ€Ð¸Ð²ÐµÑ‚, {name}! Ð¯ Ñ‚Ð²Ð¾Ð¹ Ð·Ð°Ð±Ð¾Ñ‚Ð»Ð¸Ð²Ñ‹Ð¹ Ð°ÑÑÐ¸ÑÑ‚ÐµÐ½Ñ‚. Ð’Ð¼ÐµÑÑ‚Ðµ Ð¼Ñ‹ Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‚Ð¸Ð¼ Ð·Ð°Ð±Ð¾Ñ‚Ñƒ Ð¾ Ð·Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð² Ð¿Ñ€Ð¾ÑÑ‚ÑƒÑŽ Ð¿Ñ€Ð¸Ð²Ñ‹Ñ‡ÐºÑƒ.",
        "reminder": "ðŸŒ¿ {med_name}: ÑÐ°Ð¼Ð¾Ðµ Ð²Ñ€ÐµÐ¼Ñ Ð¿Ñ€Ð¸Ð½ÑÑ‚ÑŒ Ð´Ð¾Ð·Ñƒ. Ð¢Ñ‹ ÑÐ¿Ñ€Ð°Ð²Ð¸ÑˆÑŒÑÑ!",
        "taken": "ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð¾, {name}! Ð¢Ð²Ð¾Ñ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð° Ð¼ÐµÐ½Ñ Ð²Ð¿ÐµÑ‡Ð°Ñ‚Ð»ÑÐµÑ‚ ðŸ’š",
        "missed": "Ð­Ð¹, {name}, Ñ Ð¿ÐµÑ€ÐµÐ¶Ð¸Ð²Ð°ÑŽ. Ð”Ð°Ð²Ð°Ð¹ Ð½Ð°Ð²ÐµÑ€ÑÑ‚Ð°ÐµÐ¼ Ð¿Ñ€Ð¾Ð¿ÑƒÑÐº Ð¸ Ð²ÐµÑ€Ð½ÐµÐ¼ÑÑ Ð² Ñ€Ð¸Ñ‚Ð¼?",
    },
    "strict_coach": {
        "welcome": "ÐŸÑ€Ð¸Ð²ÐµÑ‚, {name}. Ð¯ Ñ‚Ð²Ð¾Ð¹ Ñ‚Ñ€ÐµÐ½ÐµÑ€. Ð‘ÑƒÐ´Ñƒ Ð¼ÑÐ³ÐºÐ¾, Ð½Ð¾ Ð½Ð°ÑÑ‚Ð¾Ð¹Ñ‡Ð¸Ð²Ð¾ Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ñ‚Ð²Ð¾ÑŽ Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ñƒ Ð² Ñ‚Ð¾Ð½ÑƒÑÐµ.",
        "reminder": "â± {med_name}: Ð´Ð¸ÑÑ†Ð¸Ð¿Ð»Ð¸Ð½Ð° Ð½Ð°Ñ‡Ð¸Ð½Ð°ÐµÑ‚ÑÑ Ñ Ð¼ÐµÐ»Ð¾Ñ‡ÐµÐ¹. ÐŸÑ€Ð¸Ð¼Ð¸ Ð²Ð¾Ð²Ñ€ÐµÐ¼Ñ!",
        "taken": "Ð¢Ð°Ðº Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ, {name}. ÐŸÐ»Ð°Ð½ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½, Ð¼Ð¾Ð¶Ð½Ð¾ Ð³Ð¾Ñ€Ð´Ð¸Ñ‚ÑŒÑÑ.",
        "missed": "ÐŸÑ€Ð¾Ð¿ÑƒÑÐº â€” ÑÑ‚Ð¾ Ð¿Ð¾Ð²Ð¾Ð´ ÑÑ‚Ð°Ñ‚ÑŒ ÑÐ¸Ð»ÑŒÐ½ÐµÐµ, Ð° Ð½Ðµ Ð¾Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ñ€ÑƒÐºÐ¸. ÐÐ°Ð²ÐµÑ€ÑÑ‚Ð°ÐµÐ¼?",
    },
    "funny_robot": {
        "welcome": "Ð‘Ð¸Ð¿-Ð±Ð¸Ð¿, {name}! Ð¯ Ð´Ñ€ÑƒÐ¶ÐµÐ»ÑŽÐ±Ð½Ñ‹Ð¹ Ñ€Ð¾Ð±Ð¾Ñ‚. Ð‘ÑƒÐ´Ñƒ ÑˆÑƒÑ‚Ð¸Ñ‚ÑŒ Ð¸ ÑÐ»ÐµÐ´Ð¸Ñ‚ÑŒ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ñ‚Ñ‹ Ð½Ð¸Ñ‡ÐµÐ³Ð¾ Ð½Ðµ Ð·Ð°Ð±Ñ‹Ð²Ð°Ð» ðŸ¤–",
        "reminder": "ðŸ”” {med_name}: ÐµÑÐ»Ð¸ Ð±Ñ‹ Ñ‚Ð°Ð±Ð»ÐµÑ‚ÐºÐ¸ ÑƒÐ¼ÐµÐ»Ð¸ Ð³Ð¾Ð²Ð¾Ñ€Ð¸Ñ‚ÑŒ, Ð¾Ð½Ð¸ Ð±Ñ‹ ÑƒÐ¶Ðµ ÑÐºÑƒÑ‡Ð°Ð»Ð¸ Ð¿Ð¾ Ñ‚ÐµÐ±Ðµ!",
        "taken": "Ð—Ð°Ð¿Ð¸ÑÑŒ Ð² Ð»Ð¾Ð³Ð¸: {name} ÑÐ½Ð¾Ð²Ð° Ð½Ð° Ð²Ñ‹ÑÐ¾Ñ‚Ðµ. ÐŸÐ¸ÐºÑÐµÐ»Ð¸ Ð°Ð¿Ð»Ð¾Ð´Ð¸Ñ€ÑƒÑŽÑ‚ ðŸ‘",
        "missed": "Ð¡Ð¸ÑÑ‚ÐµÐ¼ÐºÐ° Ð·Ð°Ñ„Ð¸ÐºÑÐ¸Ñ€Ð¾Ð²Ð°Ð»Ð° Ð¿Ñ€Ð¾Ð¿ÑƒÑÐº. Ð—Ð°Ð¿ÑƒÑÐºÐ°ÑŽ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ñƒ Ð¼Ð¾Ñ‚Ð¸Ð²Ð°Ñ†Ð¸Ð¸ â€” Ð½Ðµ ÑÐ´Ð°Ð²Ð°Ð¹ÑÑ!",
    },
}


def personality_text(personality: str, message_key: str, **kwargs) -> str:
    persona = PERSONALITY_TEMPLATES.get(personality, PERSONALITY_TEMPLATES[DEFAULT_PERSONALITY])
    template = persona.get(message_key, PERSONALITY_TEMPLATES[DEFAULT_PERSONALITY].get(message_key, ""))
    if not template:
        return ""
    return template.format(**kwargs)
